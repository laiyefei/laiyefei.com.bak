---
layout: post
title: 堡垒机的疑问
tags: 安全
categories: 原理 运维
---

* TOC
{:toc}

# 序言
没啥前言了，就是笔者看到堡垒机好奇，而且笔者工作中应该会经常接触，既然这样，就弄个清楚吧，满足笔者一向的好奇心，和**刨根问底**的性格。

# 大纲
当今的时代是一个信息化社会，信息系统已经成为各企业单位业务正常运行的关键了，由于运维人员掌握着信息系统的最高权限，一旦运维操作出现安全问题，将为企业单位带来巨大的损失。因此，加强对运维人员的监管与审计，是安全发展的必然趋势。在这种情况下，针对运维操作的管理与审计的堡垒机应运而生。<br />
堡垒机提供了一套多维度运维操作管控与审计的解决方案，使得管理人员可以面对**各种资源**【如网络设备，服务器，安全设备，数据库等】进行账号集中管理，**细粒度** 的权限管理和访问审计，帮助企业提升内部风险控制水平。

## 定义
堡垒一词，相信大家都不陌生，堡垒是指坚固的建筑物或者形容难以攻破的事物，从字面上来看，**堡垒机** 是指用于防卫攻击的计算机。在实际应用中，**堡垒机**又叫做**堡垒主机**，是一个主机系统，其自身经过了一定的加固，具有较高的安全性，可抵御一定的攻击。它的作用是：将保护度信息资源与安全来源进行隔离，从而在保护的资源面前形成一个坚固的**堡垒**，并且在抵御威胁的同时，又不影响普通用户对资源的正常访问。

## 解析
堡垒机大概可以分为以下几类：<br />
~~~
1. 网关型堡垒机
  网关型的堡垒机被部署在外部网络和内部网络之间，其本身不直接向外部提供服务而是作为进入内部网络的
  一个检查点，用于提供对内部网络特定资源的安全访问控制。这类堡垒机不提供路由功能，将内外网从网络
  层隔离开来，因此除非授权访问外，还可以过滤掉一些针对内网的来自应用层以下的攻击，为内部网络资源
  提供了一道安全屏障。但由于此类堡垒机需要处理应用层数据的内容，性能消耗很大，所以，随着网络进出
  口流量越来越大，部署在网关部分的堡垒机逐渐成为性能瓶颈，因此，网关型的堡垒机逐渐被日趋成熟的防
  火墙，UTM【安全网关】，TPS【事务处理系统】，网闸等安全产品所取代。
2. 运维审计堡垒机【内控堡垒机】
  运维审计型堡垒机被部署在内网中的服务器和网络设备等核心资源前面，对运维人员的操作权限进行控制和
  操作行为进行审计。运维审计型堡垒机解决了运维人员权限难以控制的混乱局面，又可对违规操作行为进行
  控制和审计，而且由于运维操作本身不会产生大规模的流量，堡垒机不会成为性能的瓶颈，所以堡垒机作为
  运维操作审计的手段得到了快速的发展。
~~~

用得比较多的堡垒机是运维审计堡垒机，笔者碰到的也是这种堡垒机，那么就仔细研究下吧。<br />

~~~
工作原理：【本质：代理】
1). 运维人员在操作过程中首先连接到堡垒机，然后向堡垒机提交操作请求。
2). 该请求通过堡垒机的权限检查后，堡垒机的应用代理模块将替代用户连接到目标设备完成该操作。
3). 之后目标设备将操作结果返回给堡垒机
4). 最后堡垒机再将操作结果返回给运维操作人员。

流程：运维人员 → 堡垒机用户账号 → 授权 → 目标设备账号 → 目标设备

情景：A【管理人员】 B【运维人员】 C【审计人员】

A → 登录堡垒机，交互安全策略组件，输入安全策略。【堡垒机内部将之储存到策略配置库】
B → 登录堡垒机，交互应用代理组件，发出操作请求。【应用代理组件调用策略管理组件对操作进行核查，依据已经配置好的策略配置库。此次操作被提交到内部的审计模块，然后被记录到审计日志数据库】
C → 登录堡垒机，交互审计模块组件，进行查询。【审计模块从审计日志数据库中读取日志，并展示在交互界面】
~~~
以上就是堡垒机的业务解析，至于涉及到底层原理，笔者以后学习网络再进行剖析吧。

## 求知
那么，为什么选择堡垒机呢？为什么是堡垒机呢？在这个安全越来越重要的信息化时代，一个系统需要这么有效管理，既然是信息交互是通过网络，是通过通信传输的，扼住咽喉，通过代理信息的交互，就能比较容易把控。<br />
那么如何选择一款好的运维审计堡垒机呢？一个好的运维审计堡垒机应实现对**服务器**，**网络设备**，**安全设备** 等核心资产的运维管理账号的**集中管理**，**集中认证和授权**，通过单点登录，提供对操作行为的**精细化管理**和**审计**，达到运维管理**简单**，**方便**，**可靠** 的目的。其中具体如下：
~~~
1. 管理方便 【直观，快速，方便】
2. 可扩展性 【应变】
3. 精细审计 【协议，审计，操作，授权，监控】
4. 审计可查 【实时，记录，取证】
5. 安全性   【备份】
6. 部署方便 【不需改变（网络拓扑结构），不需安装，不影响】
~~~

## 创意
堡垒机嘛，嗯，就是代理请求，并且有日志记录。<br />
1. 与网络有关的操作可以从这里也就类似从根源排查问题，审计日志可以查看下。（当然，不是那么好取到日志的）
2. ...（← _ ←...没什么创意了）

# 总结
堡垒机，是对服务器的一层很重要的保障门，方便管理服务器，并且对操作授权和记录行为，主要是应用代理，并且可配策略，和可追踪的审计记录，易用，易管理。

<br />
↓
→ 简而言之，**堡垒机**是一种**管理**和**代理**请求，用于**安全性**的**方式**【主要是软件，当然也有硬件】。


**（以上，仅代表个人观点。无论对错，欢迎交流。^_^ ）**
